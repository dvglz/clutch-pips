Original prompt: yo let's discuss this concept
- business logic
- based on NYT Pips, but more on sports theme
- instead of dominoes, could use just jerseys / numbers, so number won't be inflated
- i want to discuss concept, pitfalls and all of that before we start to code
- output is questions then we proceed to some plan doc then to code
- goal is casual game, new seed every day
- we can use official nba data (we have an api, without copyright infringement, just team colors, team abbr and jersey numbers)

technical
- ts/vite/default stack
- mobile version is more important than desktop
- new seed every day, starting in frontend, then config from backend

## Progress Log
- Added PLAN.md with v1 rules, data model, daily seed strategy, pitfalls, and phased implementation.
- Confirmed: tile identity unique by teamAbbr+jerseyNumber, rollover at 7:00 AM PT, v1 conditions limited to SUM/HAS_TEAM/HAS_EQUAL_NUMBERS.

- Scaffolded Vite + TypeScript project files (`package.json`, `tsconfig*`, `vite.config.ts`, `index.html`).
- Implemented core game in `src/main.ts`:
  - PT daily key with 7:00 AM rollover.
  - Local daily puzzle resolver.
  - Drag-and-drop and tap-to-place interactions.
  - Region condition evaluator for SUM/HAS_TEAM/HAS_EQUAL_NUMBERS.
  - Invalid-region highlight on check/full board.
  - `window.render_game_to_text` and `window.advanceTime` hooks.
- Added mobile-first NYT Pips-inspired styling in `src/style.css`.
- Fixed strict TypeScript nullability issue in `main.ts` and rebuilt successfully.
- Added keyboard control layer for deterministic automation:
  - Arrow keys move board cursor.
  - `a`/`b` cycles available tray jerseys.
  - `enter`/`space` places/removes at cursor.
- Playwright runs executed against `dist` build:
  - Idle render: `output/web-game-check/`.
  - Partial placement interaction: `output/web-game-check-place/`.
  - Full solve interaction: `output/web-game-check-solve/`.
- Verified via `state-0.json` that full solve marks all conditions as `pass` and `boardFilled: true`.

## Remaining TODOs / Suggestions
- Replace local `DAILY_PUZZLES` map with backend-config daily payload fetch.
- Add puzzle authoring/validation CLI to enforce single-solution before publish.
- Add additional day variants with non-square/irregular board shapes.
- UX adjustment after feedback:
  - Removed decorative region diamond tags that were misleading vs actual rules.
  - Added `Reveal solution` button for fast solvability verification.
- Rebuilt and validated with Playwright (`output/web-game-check-reveal/`): reveal action produces full solved state with all conditions passing.
- Implemented major gameplay/UI revision per user feedback:
  - Replaced puzzle content with a new jersey set and new region rules (`p-jerseys-002`).
  - Added `COUNT_TEAM` condition type and changed team marker semantics to explicit counts (`2xGSW`).
  - Added board-attached region markers that are anchored to each region's bottom-right area and remain visible after cells are filled.
  - Added drag/tap replacement behavior: dropping/placing onto an occupied cell replaces existing tile; replaced tile returns to stash.
  - Added right-side panel with Conditions + Debug sections.
  - Debug now includes uncovered-condition-cells diagnostics.
- Build validation: `npm run build` passes.
- Playwright validations:
  - Idle render: `output/web-game-v2-idle/`
  - Swap behavior: `output/web-game-v2-swap/`
  - Reveal solved state: `output/web-game-v2-reveal/` and `output/web-game-v2-reveal-final/`
  - Verified from state snapshots that swap updates placements and solved state sets all conditions to pass.
- Marker/region UX simplification update:
  - Reduced puzzle to 4 primary conditions/regions (2 sums + 2 team rules).
  - Removed the right-side condition legend list; rules now appear directly on board markers.
  - Marker chips now show explicit hints (`Σ81`, `Σ122`, `2xGSW`, `MIA+`) and can be clicked/hovered.
  - Added same-color region highlight: focused marker paints affected cells with matching background tone.
- Build validation: `npm run build` passes after marker simplification.
- Playwright validations for new marker UX:
  - Idle: `output/web-game-v3-markers-idle/`
  - Marker focus color match: `output/web-game-v3-markers-focus/`
  - Reveal solved state with 4 conditions passing: `output/web-game-v3-markers-reveal/`
- Region consistency update per feedback:
  - Reworked puzzle to use 4 non-overlapping regions only.
  - Removed sigma prefix on sum markers (plain numeric hints only).
  - Region cells now use the same base background family as their marker tone.
  - Added hard guard `assertNoOverlappingRegions` to reject overlapping region definitions.
- Build validation: `npm run build` passes after non-overlap + color match update.
- Playwright validations for non-overlap/color update:
  - Idle: `output/web-game-v4-nonoverlap-idle/`
  - Focus: `output/web-game-v4-nonoverlap-focus/`
  - Reveal solved: `output/web-game-v4-nonoverlap-reveal/`
- Team-color marker update:
  - For `HAS_TEAM`/`COUNT_TEAM` rules, marker/background colors now derive from the team palette in tray data (team primary as marker bg).
  - Team-based region cells and focus state now use the same team-driven color mapping.
- Build validation: `npm run build` passes after team-color marker logic.
- Playwright validations for team-color markers:
  - Idle: `output/web-game-v5-team-marker-colors/`
  - Reveal solved: `output/web-game-v5-team-marker-colors-reveal/`
- Marker compactness/placement update:
  - Reduced marker chip size (height/font/padding) for a denser Pips-like look.
  - Reworked marker anchoring so each marker sits on the bottom-right corner of its region’s bottom-right tile.
- Build validation: `npm run build` passes after compact marker placement update.
- Playwright validation:
  - Idle render with compact anchored markers: `output/web-game-v6-compact-marker-idle/`
- Marker overlap placement update:
  - Markers now sit half outside the bottom-right anchor corner (Pips-style overlap at tile boundary).
  - Increased marker overlay layer (`.markers` z-index) to keep chips visually in front of tiles.
- Build validation: `npm run build` passes after marker half-outside adjustment.
- Playwright validation:
  - Idle render with half-outside markers: `output/web-game-v7-marker-half-outside/`
- Daily seed update:
  - Added alternate seed `p-jerseys-003` with new SUM/team conditions and solution layout.
  - Switched `2026-02-26` daily mapping to the new seed for immediate playtesting.
- Build validation: `npm run build` passes after adding the new daily seed.
- Board sizing update:
  - Increased board cell size from `76` to `92` and gap from `6` to `8` for a larger play area.
  - Updated both TS layout constants and CSS root variables to keep geometry aligned.
- Build validation: `npm run build` passes after board size increase.
- Jersey label update:
  - Removed team abbreviation text from jersey tiles; jerseys now show only numbers.
  - Deleted unused `.tile-team` style rules.
- Build validation: `npm run build` passes after jersey label cleanup.
